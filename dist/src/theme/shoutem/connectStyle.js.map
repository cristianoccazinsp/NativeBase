{"version":3,"sources":["../../../../src/theme/shoutem/connectStyle.js"],"names":["themeCache","clearThemeCache","throwConnectStyleError","errorMessage","componentDisplayName","Error","getTheme","context","theme","Theme","getDefaultTheme","isStyleVariant","propertyName","test","isChildStyle","getConcreteStyle","style","_","pickBy","value","key","Object","entries","obj","ownProps","keys","i","length","resArray","Array","componentStyleName","componentStyle","mapPropsToStyleNames","options","getComponentDisplayName","WrappedComponent","displayName","name","wrapWithStyledComponent","isPlainObject","isString","StyledComponent","props","console","log","styleNames","getStyleNames","finalStyle","getFinalStyle","setWrappedInstance","bind","resolveConnectedComponentStyle","state","addedProps","resolveAddedProps","resolvedStyle","parentPath","getOrSetStylesInCache","resolveStyle","concreteStyle","isArray","styleNamesArr","push","getParentPath","nextProps","nextContext","shouldRebuildStyle","setState","nativeProps","wrappedInstance","setNativeProps","component","_root","isEqual","styleName","hasStyleNameChanged","split","uniq","withRef","ref","path","cacheKey","join","parentStyle","themeStyle","createComponentStyle","resolveStyleNames","React","Component","contextTypes","ThemeShape","PropTypes","array","childContextTypes","propTypes","oneOfType","object","number","string","virtual","bool","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport hoistStatics from 'hoist-non-react-statics';\nimport * as _ from 'lodash';\n\nimport Theme, {ThemeShape} from './Theme';\nimport {resolveComponentStyle} from './resolveComponentStyle';\n\nlet themeCache = {};\n\n/**\n * clear theme cache\n * @export\n */\nexport function clearThemeCache() {\n  themeCache = {};\n}\n\n/**\n * Formats and throws an error when connecting component style with the theme.\n *\n * @param errorMessage The error message.\n * @param componentDisplayName The name of the component that is being connected.\n */\nfunction throwConnectStyleError(errorMessage, componentDisplayName) {\n  throw Error(\n    `${errorMessage} - when connecting ${componentDisplayName} component to style.`,\n  );\n}\n\n/**\n * Returns the theme object from the provided context,\n * or an empty theme if the context doesn't contain a theme.\n *\n * @param context The React component context.\n * @returns {Theme} The Theme object.\n */\nfunction getTheme(context) {\n  // Fallback to a default theme if the component isn't\n  // rendered in a StyleProvider.\n  return context.theme || Theme.getDefaultTheme();\n}\n\n/**\n * Matches any style properties that represent component style variants.\n * Those styles can be applied to the component by using the styleName\n * prop. All style variant property names must start with a single '.'\n * character, e.g., '.variant'.\n *\n * @param propertyName The style property name.\n * @returns {boolean} True if the style property represents a component variant, false otherwise.\n */\nfunction isStyleVariant(propertyName) {\n  return /^\\./.test(propertyName);\n}\n\n/**\n * Matches any style properties that represent style rules that target the\n * component children. Those styles can have two formats, they can either\n * target the components by component name ('shoutem.ui.Text'), or by component\n * name and variant ('shoutem.ui.Text.line-through'). Beside specifying the\n * component name, those styles can also target any component by using the\n * '*' wildcard ('*', or '*.line-through'). The rule to identify those styles is\n * that they have to contain a '.' character in their name or be a '*'.\n *\n * @param propertyName The style property name.\n * @returns {boolean} True if the style property represents a child style, false otherwise.\n */\nfunction isChildStyle(propertyName) {\n  return /(^[^.].*\\.)|^\\*$/.test(propertyName);\n}\n\nfunction getConcreteStyle(style) {\n  return _.pickBy(style, (value, key) => {\n    return !isStyleVariant(key) && !isChildStyle(key);\n  });\n}\n\n// polyfill this methid in case it is not availablle\nif (!Object.entries) {\n  Object.entries = function (obj) {\n    var ownProps = Object.keys(obj),\n      i = ownProps.length,\n      resArray = new Array(i); // preallocate the Array\n    while (i--) {\n      resArray[i] = [ownProps[i], obj[ownProps[i]]];\n    }\n\n    return resArray;\n  };\n}\n\n/**\n * Resolves the final component style by using the theme style, if available and\n * merging it with the style provided directly through the style prop, and style\n * variants applied through the styleName prop.\n *\n * @param componentStyleName The component name that will be used\n * to target this component in style rules.\n * @param componentStyle The default component style.\n * @param mapPropsToStyleNames Pure function to customize styleNames depending on props.\n * @param options The additional connectStyle options\n * @param options.virtual The default value of the virtual prop\n * @param options.withRef Create component ref with addedProps; if true, ref name is wrappedInstance\n * @returns {StyledComponent} The new component that will handle\n * the styling of the wrapped component.\n */\nexport default (\n  componentStyleName,\n  componentStyle = {},\n  mapPropsToStyleNames,\n  options = {},\n) => {\n  function getComponentDisplayName(WrappedComponent) {\n    return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n  }\n\n  return function wrapWithStyledComponent(WrappedComponent) {\n    const componentDisplayName = getComponentDisplayName(WrappedComponent);\n\n    if (!_.isPlainObject(componentStyle)) {\n      throwConnectStyleError(\n        'Component style must be plain object',\n        componentDisplayName,\n      );\n    }\n\n    if (!_.isString(componentStyleName)) {\n      throwConnectStyleError(\n        'Component Style Name must be string',\n        componentDisplayName,\n      );\n    }\n\n    class StyledComponent extends React.Component {\n      static contextTypes = {\n        theme: ThemeShape,\n        // The style inherited from the parent\n        // parentStyle: PropTypes.object,\n        parentPath: PropTypes.array,\n      };\n\n      static childContextTypes = {\n        // Provide the parent style to child components\n        // parentStyle: PropTypes.object,\n        // resolveStyle: PropTypes.func,\n        parentPath: PropTypes.array,\n      };\n\n      static propTypes = {\n        // Element style that overrides any other style of the component\n        style: PropTypes.oneOfType([\n          PropTypes.object,\n          PropTypes.number,\n          PropTypes.array,\n        ]),\n        // The style variant names to apply to this component,\n        // multiple variants may be separated with a space character\n        styleName: PropTypes.string,\n        // Virtual elements will propagate the parent\n        // style to their children, i.e., the children\n        // will behave as they are placed directly below\n        // the parent of a virtual element.\n        virtual: PropTypes.bool,\n      };\n\n      static defaultProps = {\n        virtual: options.virtual,\n      };\n\n      static displayName = `Styled(${componentDisplayName})`;\n      static WrappedComponent = WrappedComponent;\n\n      constructor(props, context) {\n        super(props, context);\n        // console.log(context.parentPath);\n        console.log(\"A\")\n        const styleNames = this.getStyleNames(props);\n        const style = props.style;\n\n        console.log(\"B\")\n        const finalStyle = this.getFinalStyle(\n          props,\n          context,\n          style,\n          styleNames,\n        );\n\n        console.log(\"C\")\n\n        this.setWrappedInstance = this.setWrappedInstance.bind(this);\n        this.resolveConnectedComponentStyle =\n          this.resolveConnectedComponentStyle.bind(this);\n\n        console.log(\"D\")\n        this.state = {\n          style: finalStyle,\n          // AddedProps are additional WrappedComponent props\n          // Usually they are set trough alternative ways,\n          // such as theme style, or trough options\n          addedProps: this.resolveAddedProps(),\n          styleNames,\n        };\n      }\n\n      getFinalStyle(props, context, style, styleNames) {\n        let resolvedStyle = {};\n        if (context.parentPath) {\n          resolvedStyle = this.getOrSetStylesInCache(\n            context,\n            props,\n            styleNames,\n            [...context.parentPath, componentStyleName, ...styleNames],\n          );\n        } else {\n          resolvedStyle = this.resolveStyle(context, props, styleNames);\n          themeCache[componentStyleName] = resolvedStyle;\n        }\n\n        const concreteStyle = getConcreteStyle(\n          Object.assign({}, resolvedStyle),\n        );\n\n        if (_.isArray(style)) {\n          return [concreteStyle, ...style];\n        }\n\n        if (typeof style === 'number' || typeof style === 'object') {\n          return [concreteStyle, style];\n        }\n\n        return concreteStyle;\n      }\n\n      getStyleNames(props) {\n        let styleNamesArr = [];\n        for (const [key, value] of Object.entries(props)) {\n          if (typeof value !== 'object' && value === true) {\n            styleNamesArr.push('.' + key);\n          }\n        }\n\n        return styleNamesArr;\n      }\n\n      getParentPath() {\n        if (!this.context.parentPath) {\n          return [componentStyleName];\n        } else {\n          return [\n            ...this.context.parentPath,\n            componentStyleName,\n            ...this.getStyleNames(this.props),\n          ];\n        }\n      }\n\n      getChildContext() {\n        return {\n          // parentStyle: this.props.virtual ?\n          //   this.context.parentStyle :\n          //   this.state.childrenStyle,\n          // resolveStyle: this.resolveConnectedComponentStyle,\n          parentPath: this.getParentPath(),\n        };\n      }\n\n      UNSAFE_componentWillReceiveProps(nextProps, nextContext) {\n        const styleNames = this.getStyleNames(nextProps);\n        const style = nextProps.style;\n        if (this.shouldRebuildStyle(nextProps, nextContext, styleNames)) {\n          const finalStyle = this.getFinalStyle(\n            nextProps,\n            nextContext,\n            style,\n            styleNames,\n          );\n\n          this.setState({\n            style: finalStyle,\n            // childrenStyle: resolvedStyle.childrenStyle,\n            styleNames,\n          });\n        }\n      }\n\n      setNativeProps(nativeProps) {\n        if (this.wrappedInstance.setNativeProps) {\n          this.wrappedInstance.setNativeProps(nativeProps);\n        }\n      }\n\n      setWrappedInstance(component) {\n        if (component && component._root) {\n          this._root = component._root;\n        } else {\n          this._root = component;\n        }\n        this.wrappedInstance = this._root;\n      }\n\n      hasStyleNameChanged(nextProps, styleNames) {\n        return (\n          mapPropsToStyleNames &&\n          this.props !== nextProps &&\n          // Even though props did change here,\n          // it doesn't necessary means changed props are those which affect styleName\n          !_.isEqual(this.state.styleNames, styleNames)\n        );\n      }\n\n      shouldRebuildStyle(nextProps, nextContext, styleNames) {\n        return (\n          nextProps.style !== this.props.style ||\n          nextProps.styleName !== this.props.styleName ||\n          nextContext.theme !== this.context.theme ||\n          !_.isEqual(nextContext.parentPath, this.context.parentPath) ||\n          this.hasStyleNameChanged(nextProps, styleNames)\n        );\n      }\n\n      resolveStyleNames(props) {\n        const {styleName} = props;\n        const styleNames = styleName ? styleName.split(/\\s/g) : [];\n\n        if (!mapPropsToStyleNames) {\n          return styleNames;\n        }\n\n        // We only want to keep the unique style names\n        return _.uniq(mapPropsToStyleNames(styleNames, props));\n      }\n\n      resolveAddedProps() {\n        const addedProps = {};\n        if (options.withRef) {\n          addedProps.ref = 'wrappedInstance';\n        }\n        return addedProps;\n      }\n\n      getOrSetStylesInCache(context, props, styleNames, path) {\n        const cacheKey = path.join('>');\n        if (themeCache && themeCache[cacheKey]) {\n          return themeCache[cacheKey];\n        } else {\n          const resolvedStyle = this.resolveStyle(context, props, styleNames);\n          themeCache[cacheKey] = resolvedStyle;\n          return resolvedStyle;\n        }\n      }\n\n      resolveStyle(context, props, styleNames) {\n        let parentStyle = {};\n\n        const theme = getTheme(context);\n        const themeStyle = theme.createComponentStyle(\n          componentStyleName,\n          componentStyle,\n        );\n\n        if (context.parentPath) {\n          parentStyle = themeCache[context.parentPath.join('>')];\n        } else {\n          parentStyle = resolveComponentStyle(\n            componentStyleName,\n            styleNames,\n            themeStyle,\n            parentStyle,\n          );\n        }\n\n        return resolveComponentStyle(\n          componentStyleName,\n          styleNames,\n          themeStyle,\n          parentStyle,\n        );\n      }\n\n      /**\n       * A helper function provided to child components that enables\n       * them to resolve their style for any set of prop values.\n       *\n       * @param props The component props to use to resolve the style values.\n       * @returns {*} The resolved component style.\n       */\n      resolveConnectedComponentStyle(props) {\n        const styleNames = this.resolveStyleNames(props);\n        return this.resolveStyle(this.context, props, styleNames)\n          .componentStyle;\n      }\n\n      render() {\n        // console.log('themeCache', themeCache);\n\n        // if(componentStyleName == 'NativeBase.Text') {\n        //   console.log(this.state.style);\n        //   console.log(themeCache);\n        // }\n\n        const {addedProps, style} = this.state;\n        return (\n          <WrappedComponent\n            {...this.props}\n            {...addedProps}\n            style={style}\n            ref={this.setWrappedInstance}\n          />\n        );\n      }\n    }\n\n    return hoistStatics(StyledComponent, WrappedComponent);\n  };\n};\n"],"file":"connectStyle.js"}