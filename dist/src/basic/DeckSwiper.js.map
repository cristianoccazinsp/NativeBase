{"version":3,"sources":["../../../src/basic/DeckSwiper.js"],"names":["SWIPE_THRESHOLD","DeckSwiper","props","getInitialStyle","topCard","position","top","right","left","state","pan","Animated","ValueXY","pan2","enter","Value","selectedItem","dataSource","selectedItem2","card1Top","card2Top","fadeAnim","looping","disabled","length","lastCard","setPanresponder","setState","undefined","visibleIndex","indexOf","currentIndex","nextIndex","x","y","translateX","translateY","rotate","interpolate","inputRange","outputRange","opacity","scale","animatedCardStyles","transform","animatedCardStyles2","_panResponder","PanResponder","create","onMoveShouldSetResponderCapture","onMoveShouldSetPanResponderCapture","evt","gestureState","Math","abs","dx","onPanResponderGrant","setOffset","_value","setValue","onPanResponderMove","e","onSwiping","val","timing","toValue","useNativeDriver","start","spring","friction","event","onPanResponderRelease","vx","vy","velocity","onSwipeRight","selectNext","onSwipeLeft","decay","deceleration","_resetState","bind","setTimeout","nextIndexes","findNextIndexes","newIdx","newIdx2","flexDirection","renderEmpty","getCardStyles","panHandlers","renderItem","renderBottom","renderTop","Component","propTypes","ViewPropTypes","style","PropTypes","oneOfType","object","number","array","StyledDeckSwiper","mapPropsToStyleNames"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {View, Animated, PanResponder, ViewPropTypes} from 'react-native';\nimport clamp from 'clamp';\n\nimport {connectStyle} from '../theme/shoutem';\nimport mapPropsToStyleNames from '../utils/mapPropsToStyleNames';\n\nconst SWIPE_THRESHOLD = 120;\n\nclass DeckSwiper extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      pan: new Animated.ValueXY(),\n      pan2: new Animated.ValueXY(),\n      enter: new Animated.Value(0.8),\n      selectedItem: this.props.dataSource[0],\n      selectedItem2: this.props.dataSource[1],\n      card1Top: true,\n      card2Top: false,\n      fadeAnim: new Animated.Value(0.8),\n      looping:\n        typeof this.props.looping === 'undefined' ? true : this.props.looping,\n      disabled: this.props.dataSource.length === 0,\n      lastCard: this.props.dataSource.length === 1,\n    };\n    this.setPanresponder();\n  }\n\n  componentDidUpdate({dataSource}) {\n    if (dataSource.length !== this.props.dataSource.length) {\n      if (dataSource.length <= 1) {\n        this.setState({\n          ...this.state,\n          selectedItem: dataSource[0],\n          selectedItem2: undefined,\n          disabled: dataSource.length === 0,\n          lastCard: dataSource.length === 1,\n        });\n        return;\n      }\n\n      const visibleIndex = dataSource.indexOf(this.state.selectedItem);\n      const currentIndex = visibleIndex < 0 ? visibleIndex + 1 : visibleIndex;\n      const nextIndex =\n        currentIndex + 1 === dataSource.length ? 0 : currentIndex + 1;\n\n      this.setState({\n        selectedItem: dataSource[currentIndex],\n        selectedItem2: dataSource[nextIndex],\n      });\n    }\n  }\n\n  getInitialStyle = () => {\n    return {\n      topCard: {\n        position: 'absolute',\n        top: 0,\n        right: 0,\n        left: 0,\n      },\n    };\n  };\n\n  getCardStyles() {\n    const {pan, enter} = this.state;\n\n    const [translateX, translateY] = [pan.x, pan.y];\n    // let [translateX, translateY] = [pan2.x, pan2.y];\n\n    const rotate = pan.x.interpolate({\n      inputRange: [-700, 0, 700],\n      outputRange: ['-10deg', '0deg', '10deg'],\n    });\n\n    const opacity = pan.x.interpolate({\n      inputRange: [-320, 0, 320],\n      outputRange: [0.9, 1, 0.9],\n    });\n    const scale = enter;\n\n    const animatedCardStyles = {\n      transform: [{translateX}, {translateY}, {rotate}],\n      opacity,\n    };\n    const animatedCardStyles2 = {transform: [{scale}]};\n\n    return [animatedCardStyles, animatedCardStyles2];\n  }\n\n  setPanresponder() {\n    this._panResponder = PanResponder.create({\n      onMoveShouldSetResponderCapture: () => true,\n      onMoveShouldSetPanResponderCapture: (evt, gestureState) =>\n        Math.abs(gestureState.dx) > 5,\n\n      onPanResponderGrant: () => {\n        this.state.pan.setOffset({\n          x: this.state.pan.x._value,\n          y: this.state.pan.y._value,\n        });\n        this.state.pan.setValue({x: 0, y: 0});\n      },\n\n      onPanResponderMove: (e, gestureState) => {\n        if (gestureState.dx > 20) {\n          if (this.props.onSwiping) {\n            this.props.onSwiping('right', gestureState.dx);\n          }\n        } else if (gestureState.dx < -20) {\n          if (this.props.onSwiping) {\n            this.props.onSwiping('left', gestureState.dx);\n          }\n        }\n        let val = Math.abs(gestureState.dx * 0.0013);\n        if (val > 0.2) {\n          val = 0.2;\n        }\n        Animated.timing(this.state.fadeAnim, {\n          toValue: 0.8 + val,\n          useNativeDriver: false,\n        }).start();\n        Animated.spring(this.state.enter, {\n          toValue: 0.8 + val,\n          friction: 7,\n          useNativeDriver: false,\n        }).start();\n        Animated.event([null, {dx: this.state.pan.x}], {\n          useNativeDriver: false,\n        })(e, gestureState);\n      },\n\n      onPanResponderRelease: (e, {vx, vy}) => {\n        if (this.props.onSwiping) {\n          this.props.onSwiping(null);\n        }\n        let velocity;\n\n        if (vx >= 0) {\n          velocity = clamp(vx, 4.5, 10);\n        } else if (vx < 0) {\n          velocity = clamp(vx * -1, 4.5, 10) * -1;\n        }\n\n        if (Math.abs(this.state.pan.x._value) > SWIPE_THRESHOLD) {\n          if (velocity > 0) {\n            this.props.onSwipeRight\n              ? this.props.onSwipeRight(this.state.selectedItem)\n              : undefined;\n            this.selectNext();\n          } else {\n            this.props.onSwipeLeft\n              ? this.props.onSwipeLeft(this.state.selectedItem)\n              : undefined;\n            this.selectNext();\n          }\n\n          Animated.decay(this.state.pan, {\n            velocity: {x: velocity, y: vy},\n            deceleration: 0.98,\n            useNativeDriver: false,\n          }).start(this._resetState.bind(this));\n        } else {\n          Animated.spring(this.state.pan, {\n            toValue: {x: 0, y: 0},\n            friction: 4,\n            useNativeDriver: false,\n          }).start();\n        }\n      },\n    });\n  }\n\n  _resetState() {\n    this.state.pan.setValue({x: 0, y: 0});\n    this.state.enter.setValue(0.8);\n    this.state.fadeAnim.setValue(0.8);\n    this.setState({\n      card1Top: !this.state.card1Top,\n      card2Top: !this.state.card2Top,\n    });\n    if (this.props.onSwiping) {\n      this.props.onSwiping(null);\n    }\n  }\n\n  swipeRight() {\n    if (this.props.onSwiping) {\n      this.props.onSwiping('right');\n    }\n    setTimeout(() => {\n      Animated.timing(this.state.fadeAnim, {\n        toValue: 1,\n        useNativeDriver: false,\n      }).start();\n      Animated.spring(this.state.enter, {\n        toValue: 1,\n        friction: 7,\n        useNativeDriver: false,\n      }).start();\n      this.selectNext();\n      Animated.decay(this.state.pan, {\n        velocity: {x: 8, y: 1},\n        deceleration: 0.98,\n        useNativeDriver: false,\n      }).start(this._resetState.bind(this));\n    }, 300);\n  }\n\n  swipeLeft() {\n    if (this.props.onSwiping) {\n      this.props.onSwiping('left');\n    }\n    setTimeout(() => {\n      Animated.timing(this.state.fadeAnim, {\n        toValue: 1,\n        useNativeDriver: false,\n      }).start();\n      Animated.spring(this.state.enter, {\n        toValue: 1,\n        friction: 7,\n        useNativeDriver: false,\n      }).start();\n      this.selectNext();\n      Animated.decay(this.state.pan, {\n        velocity: {x: -8, y: 1},\n        deceleration: 0.98,\n        useNativeDriver: false,\n      }).start(this._resetState.bind(this));\n    }, 300);\n  }\n\n  selectNext() {\n    const dataSource = this.props.dataSource;\n    const currentIndex = dataSource.indexOf(this.state.selectedItem);\n\n    // if not looping, check for these conditionals and if true return from selectNext()\n    if (!this.state.looping) {\n      // reached end -> only display static renderEmpty() -> no swiping\n      if (currentIndex === dataSource.length - 1) {\n        return this.setState({\n          disabled: true,\n        });\n      } else if (currentIndex === dataSource.length - 2) {\n        // show last card with renderEmpty() component behind it\n        return setTimeout(() => {\n          this.setState({\n            selectedItem: dataSource[currentIndex + 1],\n          });\n          setTimeout(() => {\n            this.setState({\n              lastCard: true,\n            });\n          }, 350);\n        }, 50);\n      }\n    }\n\n    const nextIndexes = this.findNextIndexes(currentIndex);\n    setTimeout(() => {\n      this.setState({\n        selectedItem: this.props.dataSource[nextIndexes[0]],\n      });\n      setTimeout(() => {\n        this.setState({\n          selectedItem2: this.props.dataSource[nextIndexes[1]],\n        });\n      }, 350);\n    }, 50);\n\n    return null;\n  }\n\n  findNextIndexes(currentIndex) {\n    const newIdx = currentIndex + 1;\n    const newIdx2 = currentIndex + 2;\n\n    if (\n      newIdx2 > this.props.dataSource.length - 1 &&\n      newIdx === this.props.dataSource.length - 1\n    ) {\n      return [newIdx, 0];\n    } else if (newIdx > this.props.dataSource.length - 1) {\n      return [0, 1];\n    }\n    return [newIdx, newIdx2];\n  }\n\n  render() {\n    if (this.state.disabled) {\n      // disable swiping and renderEmpty\n      return (\n        <View style={{position: 'relative', flexDirection: 'column'}}>\n          {<View>{this.props.renderEmpty && this.props.renderEmpty()}</View>}\n        </View>\n      );\n    } else if (this.state.lastCard) {\n      // display renderEmpty underneath last viable card\n      return (\n        <View style={{position: 'relative', flexDirection: 'column'}}>\n          {this.state.selectedItem === undefined ? (\n            <View />\n          ) : (\n            <View>\n              <Animated.View\n                style={[\n                  this.getCardStyles()[1],\n                  this.getInitialStyle().topCard,\n                  {opacity: this.state.fadeAnim},\n                ]}\n                {...this._panResponder.panHandlers}>\n                {this.props.renderEmpty && this.props.renderEmpty()}\n              </Animated.View>\n              <Animated.View\n                style={[\n                  this.getCardStyles()[0],\n                  this.getInitialStyle().topCard,\n                ]}\n                {...this._panResponder.panHandlers}>\n                {this.props.renderItem(this.state.selectedItem)}\n              </Animated.View>\n            </View>\n          )}\n        </View>\n      );\n    }\n    return (\n      <View style={{position: 'relative', flexDirection: 'column'}}>\n        {this.state.selectedItem === undefined ? (\n          <View />\n        ) : (\n          <View>\n            <Animated.View\n              style={[\n                this.getCardStyles()[1],\n                this.getInitialStyle().topCard,\n                {opacity: this.state.fadeAnim},\n              ]}\n              {...this._panResponder.panHandlers}>\n              {this.props.renderBottom\n                ? this.props.renderBottom(this.state.selectedItem2)\n                : this.props.renderItem(this.state.selectedItem2)}\n            </Animated.View>\n            <Animated.View\n              style={[this.getCardStyles()[0], this.getInitialStyle().topCard]}\n              {...this._panResponder.panHandlers}>\n              {this.props.renderTop\n                ? this.props.renderTop(this.state.selectedItem)\n                : this.props.renderItem(this.state.selectedItem)}\n            </Animated.View>\n          </View>\n        )}\n      </View>\n    );\n  }\n}\n\nDeckSwiper.propTypes = {\n  ...ViewPropTypes,\n  style: PropTypes.oneOfType([\n    PropTypes.object,\n    PropTypes.number,\n    PropTypes.array,\n  ]),\n  dataSource: PropTypes.array,\n};\n\nconst StyledDeckSwiper = connectStyle(\n  'NativeBase.DeckSwiper',\n  {},\n  mapPropsToStyleNames,\n)(DeckSwiper);\n\nexport {StyledDeckSwiper as DeckSwiper};\n"],"file":"DeckSwiper.js"}