var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.Item=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _react=_interopRequireWildcard(require("react"));var _propTypes=_interopRequireDefault(require("prop-types"));var _reactNative=require("react-native");var _lodash=require("lodash");var _shoutem=require("../theme/shoutem");var _platform=_interopRequireDefault(require("../theme/variables/platform"));var _computeProps=_interopRequireDefault(require("../utils/computeProps"));var _mapPropsToStyleNames=_interopRequireDefault(require("../utils/mapPropsToStyleNames"));var _Input=require("./Input");var _Label=require("./Label");var _Icon=require("./Icon");var _Thumbnail=require("./Thumbnail");var _jsxFileName="/Users/cristiano/Desktop/trabajo/zinspector/NativeBase/src/basic/Item.js";function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}var Item=function(_Component){(0,_inherits2.default)(Item,_Component);var _super=_createSuper(Item);function Item(props){var _this;(0,_classCallCheck2.default)(this,Item);_this=_super.call(this,props);_this.state={isFocused:false,text:'',topAnim:new _reactNative.Animated.Value(18),opacAnim:new _reactNative.Animated.Value(1)};return _this;}(0,_createClass2.default)(Item,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;if(this.props.floatingLabel){if(this.inputProps&&this.inputProps.value){var effect=function effect(){_this2.setState({isFocused:true});};this.floatUp(-16);effect();}if(this.inputProps&&this.inputProps.getRef){this.inputProps.getRef(this._inputRef);}}}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(nextProps){var _this3=this;var childrenArray=_react.default.Children.toArray(nextProps.children);(0,_lodash.remove)(childrenArray,function(item){if(item.type.displayName==='Styled(Input)'){_this3.inputProps=item.props;return item;}return null;});if(this.props.floatingLabel){if(this.inputProps&&this.inputProps.value){this.setState({isFocused:true});this.floatUp(-16);}if(this.inputProps&&this.inputProps.getRef){this.inputProps.getRef(this._inputRef);}}}},{key:"getInitialStyle",value:function getInitialStyle(){return{roundedInputGroup:{borderWidth:this.props.rounded?_platform.default.borderWidth*2:undefined,borderRadius:this.props.rounded?_platform.default.inputGroupRoundedBorderRadius:undefined}};}},{key:"getPlacholderValue",value:function getPlacholderValue(inputProps){var placeholderValue;if((0,_lodash.isArray)(this.props.children)&&this.props.children[0].props.children){placeholderValue=null;}else{placeholderValue=inputProps.placeholder;}return placeholderValue;}},{key:"floatBack",value:function floatBack(e){_reactNative.Animated.timing(this.state.topAnim,{toValue:e||18,duration:150,useNativeDriver:false}).start();_reactNative.Animated.timing(this.state.opacAnim,{toValue:1,duration:150,useNativeDriver:false}).start();}},{key:"floatUp",value:function floatUp(e){_reactNative.Animated.timing(this.state.topAnim,{toValue:e||-22,duration:150,useNativeDriver:false}).start();_reactNative.Animated.timing(this.state.opacAnim,{toValue:0.7,duration:150,useNativeDriver:false}).start();}},{key:"prepareRootProps",value:function prepareRootProps(){var defaultProps={style:this.getInitialStyle().roundedInputGroup};return(0,_computeProps.default)(this.props,defaultProps);}},{key:"renderChildren",value:function renderChildren(){var _this4=this;var newChildren=[];var childrenArray=_react.default.Children.toArray(this.props.children);var label=[];var labelProps={};label=(0,_lodash.remove)(childrenArray,function(item){if(item.type===_Label.Label){labelProps=item.props;return item;}return null;});var inputProps={};(0,_lodash.remove)(childrenArray,function(item){if(item.type===_Input.Input){inputProps=item.props;_this4.inputProps=item.props;return item;}return null;});var icon=[];var iconProps={};icon=(0,_lodash.remove)(childrenArray,function(item){if(item.type===_Icon.Icon){iconProps=item.props;return item;}return null;});var image=[];image=(0,_lodash.remove)(childrenArray,function(item){if(item.type===_Thumbnail.Thumbnail){return item;}return null;});if(this.props.floatingLabel&&icon.length){var flag=true;var isIcon=false;for(var i=0;i<this.props.children.length;i++){if(this.props.children[i].props.name&&this.props.children[i].type.displayName!=='Styled(Input)'){isIcon=true;newChildren.push(_react.default.createElement(_Icon.Icon,(0,_extends2.default)({key:[i]},this.props.children[i].props,{__self:this,__source:{fileName:_jsxFileName,lineNumber:181,columnNumber:13}})));}if((this.props.children[i].props.children||this.props.children[i].props.placeholder)&&flag){flag=false;newChildren.push(_react.default.createElement(_reactNative.Animated.View,{key:"float",style:{position:'absolute',left:this.props.last&&isIcon?40:this.props.last?15:isIcon?26:0,right:0,top:this.state.topAnim,opacity:this.state.opacAnim,paddingTop:_reactNative.Platform.OS==='ios'?undefined:undefined,paddingBottom:_reactNative.Platform.OS==='ios'?undefined:12},__self:this,__source:{fileName:_jsxFileName,lineNumber:193,columnNumber:13}},_react.default.createElement(_Label.Label,(0,_extends2.default)({},labelProps,{__self:this,__source:{fileName:_jsxFileName,lineNumber:211,columnNumber:15}}),this.renderLabel(label,labelProps))));newChildren.push(_react.default.createElement(_Input.Input,(0,_extends2.default)({ref:function ref(c){return _this4._inputRef=c;},key:"l2"},inputProps,{placeholder:this.getPlacholderValue(inputProps),onFocus:function onFocus(){_this4.setState({isFocused:true});if(inputProps.onFocus){inputProps.onFocus();}},onBlur:function onBlur(e){if(inputProps.value){_this4.setState({isFocused:true});}else if(!_this4.state.text.length){_this4.setState({isFocused:false});}if(inputProps.onBlur){inputProps.onBlur(e);}},onChangeText:function onChangeText(text){_this4.setState({text:text});if(inputProps.onChangeText){inputProps.onChangeText(text);}},__self:this,__source:{fileName:_jsxFileName,lineNumber:218,columnNumber:13}})));}}}else if(this.props.floatingLabel&&image.length){var isImage=false;for(var _i=0;_i<this.props.children.length;_i++){if(this.props.children[_i].type.displayName==='Styled(Thumbnail)'){isImage=true;newChildren.push(_react.default.createElement(_Thumbnail.Thumbnail,(0,_extends2.default)({small:true,key:[_i]},this.props.children[_i].props,{style:{right:10,left:_i===this.props.children.length-1?undefined:0},__self:this,__source:{fileName:_jsxFileName,lineNumber:259,columnNumber:13}})));}if(this.props.children[_i].props.children){newChildren.push(_react.default.createElement(_reactNative.Animated.View,{key:"float",style:{position:'absolute',left:this.props.last&&isImage?57:this.props.last?15:isImage?42:0,right:0,top:this.state.topAnim,opacity:this.state.opacAnim,paddingTop:_reactNative.Platform.OS==='ios'?undefined:undefined,paddingBottom:_reactNative.Platform.OS==='ios'?undefined:12},__self:this,__source:{fileName:_jsxFileName,lineNumber:273,columnNumber:13}},_react.default.createElement(_Label.Label,(0,_extends2.default)({},labelProps,{__self:this,__source:{fileName:_jsxFileName,lineNumber:291,columnNumber:15}}),this.renderLabel(label,labelProps))));newChildren.push(_react.default.createElement(_Input.Input,(0,_extends2.default)({ref:function ref(c){return _this4._inputRef=c;},key:"l2"},inputProps,{placeholder:this.getPlacholderValue(inputProps),onFocus:function onFocus(){_this4.setState({isFocused:true});inputProps.onFocus&&inputProps.onFocus();},onBlur:function onBlur(e){inputProps.value?_this4.setState({isFocused:true}):!_this4.state.text.length&&_this4.setState({isFocused:false});inputProps.onBlur&&inputProps.onBlur(e);},onChangeText:function onChangeText(text){_this4.setState({text:text});inputProps.onChangeText&&inputProps.onChangeText(text);},style:{left:this.props.last&&isImage?10:this.props.last?4:isImage?10:0,marginRight:12},__self:this,__source:{fileName:_jsxFileName,lineNumber:298,columnNumber:13}})));}}}else if(this.props.floatingLabel){newChildren.push(_react.default.createElement(_reactNative.Animated.View,{key:"float",style:{position:'absolute',left:this.props.last?15:0,right:0,top:this.state.topAnim,opacity:this.state.opacAnim,paddingTop:_reactNative.Platform.OS==='ios'?undefined:undefined,paddingBottom:_reactNative.Platform.OS==='ios'?undefined:12},__self:this,__source:{fileName:_jsxFileName,lineNumber:335,columnNumber:9}},_react.default.createElement(_Label.Label,(0,_extends2.default)({},labelProps,{__self:this,__source:{fileName:_jsxFileName,lineNumber:346,columnNumber:11}}),this.renderLabel(label,labelProps))));newChildren.push(_react.default.createElement(_Input.Input,(0,_extends2.default)({ref:function ref(c){return _this4._inputRef=c;},value:this.state.text,key:"l2"},inputProps,{placeholder:this.getPlacholderValue(inputProps),onFocus:function onFocus(){_this4.setState({isFocused:true});inputProps.onFocus&&inputProps.onFocus();},onBlur:function onBlur(e){inputProps.value?_this4.setState({isFocused:true}):!_this4.state.text.length&&_this4.setState({isFocused:false});inputProps.onBlur&&inputProps.onBlur(e);},onChangeText:function onChangeText(text){_this4.setState({text:text});inputProps.onChangeText&&inputProps.onChangeText(text);},__self:this,__source:{fileName:_jsxFileName,lineNumber:351,columnNumber:9}})));}else if(this.props.stackedLabel&&icon.length){newChildren.push(_react.default.createElement(_reactNative.View,{key:"s",style:{flexDirection:'row',flex:1,width:_platform.default.deviceWidth-15},__self:this,__source:{fileName:_jsxFileName,lineNumber:375,columnNumber:9}},_react.default.createElement(_Icon.Icon,(0,_extends2.default)({key:"s1"},iconProps,{__self:this,__source:{fileName:_jsxFileName,lineNumber:382,columnNumber:11}})),_react.default.createElement(_reactNative.View,{style:{flexDirection:'column'},__self:this,__source:{fileName:_jsxFileName,lineNumber:383,columnNumber:11}},_react.default.createElement(_Label.Label,(0,_extends2.default)({key:"s2"},labelProps,{__self:this,__source:{fileName:_jsxFileName,lineNumber:384,columnNumber:13}})),_react.default.createElement(_Input.Input,(0,_extends2.default)({key:"s3"},inputProps,{style:{width:_platform.default.deviceWidth-40},__self:this,__source:{fileName:_jsxFileName,lineNumber:385,columnNumber:13}})))));}else{return this.props.children;}return newChildren;}},{key:"renderLabel",value:function renderLabel(label,labelProps){var newLabel=[];var labelStyle=_reactNative.StyleSheet.flatten([{fontSize:15,lineHeight:30},labelProps.style]);if(this.props.floatingLabel){if(this.state.isFocused){newLabel.push(_react.default.createElement(_Label.Label,(0,_extends2.default)({},labelProps,{key:'newFLabel',float:true,style:labelStyle})));this.floatUp(-16);}else{newLabel.push(label);this.floatBack(labelProps.floatBack);}}else{newLabel.push(_react.default.createElement(_Label.Label,(0,_extends2.default)({},labelProps,{key:'newLabel'})));}return newLabel;}},{key:"render",value:function render(){var _this5=this;return _react.default.createElement(_reactNative.TouchableOpacity,(0,_extends2.default)({ref:function ref(c){return _this5._root=c;}},this.prepareRootProps(),{activeOpacity:1,__self:this,__source:{fileName:_jsxFileName,lineNumber:433,columnNumber:7}}),this.renderChildren());}}]);return Item;}(_react.Component);Item.propTypes=(0,_extends2.default)({},_reactNative.TouchableOpacity.propTypes,{style:_propTypes.default.oneOfType([_propTypes.default.object,_propTypes.default.number,_propTypes.default.array]),inlineLabel:_propTypes.default.bool,floatingLabel:_propTypes.default.bool,stackedLabel:_propTypes.default.bool,fixedLabel:_propTypes.default.bool,success:_propTypes.default.bool,error:_propTypes.default.bool});var StyledItem=(0,_shoutem.connectStyle)('NativeBase.Item',{},_mapPropsToStyleNames.default)(Item);exports.Item=StyledItem;
//# sourceMappingURL=Item.js.map