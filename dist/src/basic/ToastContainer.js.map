{"version":3,"sources":["../../../src/basic/ToastContainer.js"],"names":["POSITION","ABSOLUTE","BOTTOM","TOP","ToastContainer","props","state","fadeAnim","Animated","Value","keyboardHeight","isKeyboardVisible","modalVisible","keyboardDidHide","bind","keyboardDidShow","_kbShow","Keyboard","addListener","_kbHide","remove","position","opacity","width","elevation","paddingHorizontal","Platform","OS","PLATFORM","IOS","top","undefined","bottom","getTop","buttonText","trim","length","setState","e","endCoordinates","height","config","text","getButtonText","type","supportedOrientations","style","buttonTextStyle","buttonStyle","textStyle","onClose","closeTimeout","clearTimeout","duration","setTimeout","closeToast","timing","toValue","useNativeDriver","start","reason","closeModal","ttype","getToastStyle","inst","Root","getToastInstance","_root","showToast","getModalState","Component","propTypes","ViewPropTypes","StyledToastContainer","mapPropsToStyleNames"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Keyboard, Platform, Animated, ViewPropTypes} from 'react-native';\n\nimport {connectStyle} from '../theme/shoutem';\nimport mapPropsToStyleNames from '../utils/mapPropsToStyleNames';\nimport {PLATFORM} from '../theme/variables/commonColor';\n\nimport {Text} from './Text';\nimport {Button} from './Button';\nimport {Toast} from './Toast';\nimport {Root} from './Root';\n\nconst POSITION = {\n  ABSOLUTE: 'absolute',\n  BOTTOM: 'bottom',\n  TOP: 'top',\n};\n\nclass ToastContainer extends Component {\n  static show({...config}) {\n    const inst = Root.getToastInstance();\n    if (inst && inst._root) {\n      inst._root.showToast && inst._root.showToast({config});\n    }\n  }\n  static hide() {\n    const inst = Root.getToastInstance();\n    if (\n      inst &&\n      inst._root &&\n      inst._root.getModalState &&\n      inst._root.getModalState()\n    ) {\n      inst._root.closeToast && inst._root.closeToast('functionCall');\n    }\n  }\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      fadeAnim: new Animated.Value(0),\n      keyboardHeight: 0,\n      isKeyboardVisible: false,\n      modalVisible: false,\n    };\n\n    this.keyboardDidHide = this.keyboardDidHide.bind(this);\n    this.keyboardDidShow = this.keyboardDidShow.bind(this);\n  }\n\n  componentDidMount() {\n    this._kbShow = Keyboard.addListener(\n      'keyboardDidShow',\n      this.keyboardDidShow,\n    );\n    this._kbHide = Keyboard.addListener(\n      'keyboardDidHide',\n      this.keyboardDidHide,\n    );\n  }\n\n  componentWillUnmount() {\n    if (this._kbShow) {\n      this._kbShow.remove();\n    }\n    if (this._kbHide) {\n      this._kbHide.remove();\n    }\n  }\n\n  getToastStyle() {\n    return {\n      position: POSITION.ABSOLUTE,\n      opacity: this.state.fadeAnim,\n      width: '100%',\n      elevation: 9,\n      paddingHorizontal: Platform.OS === PLATFORM.IOS ? 20 : 0,\n      top: this.state.position === POSITION.TOP ? 30 : undefined,\n      bottom:\n        this.state.position === POSITION.BOTTOM ? this.getTop() : undefined,\n    };\n  }\n\n  getTop() {\n    if (Platform.OS === PLATFORM.IOS) {\n      if (this.state.isKeyboardVisible) {\n        return this.state.keyboardHeight;\n      }\n      return 30;\n    }\n    return 0;\n  }\n\n  getButtonText(buttonText) {\n    if (buttonText) {\n      if (buttonText.trim().length === 0) {\n        return undefined;\n      }\n      return buttonText;\n    }\n    return undefined;\n  }\n  getModalState() {\n    return this.state.modalVisible;\n  }\n\n  keyboardDidHide() {\n    this.setState({\n      keyboardHeight: 0,\n      isKeyboardVisible: false,\n    });\n  }\n\n  keyboardDidShow(e) {\n    this.setState({\n      keyboardHeight: e.endCoordinates.height,\n      isKeyboardVisible: true,\n    });\n  }\n\n  showToast({config}) {\n    this.setState({\n      modalVisible: true,\n      text: config.text,\n      buttonText: this.getButtonText(config.buttonText),\n      type: config.type,\n      position: config.position ? config.position : POSITION.BOTTOM,\n      supportedOrientations: config.supportedOrientations,\n      style: config.style,\n      buttonTextStyle: config.buttonTextStyle,\n      buttonStyle: config.buttonStyle,\n      textStyle: config.textStyle,\n      onClose: config.onClose,\n    });\n    // If we have a toast already open, cut off its close timeout so that it won't affect *this* toast.\n    if (this.closeTimeout) {\n      clearTimeout(this.closeTimeout);\n    }\n    // Set the toast to close after the duration.\n    if (config.duration !== 0) {\n      const duration = config.duration > 0 ? config.duration : 1500;\n      this.closeTimeout = setTimeout(\n        this.closeToast.bind(this, 'timeout'),\n        duration,\n      );\n    }\n    // Fade the toast in now.\n    Animated.timing(this.state.fadeAnim, {\n      toValue: 1,\n      duration: 200,\n      useNativeDriver: false,\n    }).start();\n  }\n  closeModal(reason) {\n    this.setState({\n      modalVisible: false,\n    });\n    const {onClose} = this.state;\n    if (onClose && typeof onClose === 'function') {\n      onClose(reason);\n    }\n  }\n  closeToast(reason) {\n    clearTimeout(this.closeTimeout);\n    Animated.timing(this.state.fadeAnim, {\n      toValue: 0,\n      duration: 200,\n      useNativeDriver: false,\n    }).start(this.closeModal.bind(this, reason));\n  }\n\n  render() {\n    if (this.state.modalVisible) {\n      let ttype = {[this.state.type]: true};\n      return (\n        <Animated.View style={this.getToastStyle()}>\n          <Toast style={this.state.style} {...ttype}>\n            <Text style={this.state.textStyle}>{this.state.text}</Text>\n            {this.state.buttonText && (\n              <Button\n                style={this.state.buttonStyle}\n                onPress={() => this.closeToast('user')}>\n                <Text style={this.state.buttonTextStyle}>\n                  {this.state.buttonText}\n                </Text>\n              </Button>\n            )}\n          </Toast>\n        </Animated.View>\n      );\n    }\n    return null;\n  }\n}\n\nToastContainer.propTypes = {\n  ...ViewPropTypes,\n};\n\nconst StyledToastContainer = connectStyle(\n  'NativeBase.ToastContainer',\n  {},\n  mapPropsToStyleNames,\n)(ToastContainer);\n\nexport {StyledToastContainer as ToastContainer};\n"],"file":"ToastContainer.js"}